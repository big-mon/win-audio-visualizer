# win-audio-visualizer 要件定義書

## プロジェクト名

**win-audio-visualizer**

## 目的

Windows 11 上で再生されているすべてのシステム音声（例：Chrome、Spotify、通知音など）をリアルタイムで取得し、視覚的に表示するデスクトップアプリケーションを開発する。

## 概要

このアプリケーションは、Windows の WASAPI Loopback 機能を用いてスピーカー出力音をキャプチャし、リアルタイムでオーディオビジュアライザーとして画面に描画します。音楽プレイヤー、Web ブラウザ、動画アプリなど、すべてのアプリケーションの音声を対象とします。

---

## 主な要件

### 1. 対応 OS

- Windows 11（WASAPI Loopback 対応必須）

### 2. 音声入力要件

- マイク入力ではなく、**WASAPI Loopback モード**を使用してシステムの出力音を取得する
- 特定のアプリ単位ではなく、**PC で再生されているすべての音声**が対象

#### 🔍 技術的補足

- 本来の理想的な要件としては「特定のアプリ（例：Chrome など）の音声のみを対象にする」ことが考えられるが、現時点の Windows API（WASAPI）では一般的かつ安定して実装できる手段が存在しない
- サードパーティツールや高度なセッション制御による実装も考えられるが、再現性・汎用性・ユーザー負担を考慮し、本バージョンでは「PC 全体の出力音声」を対象とする
- 将来的には、アプリ単位での音声キャプチャ機能の拡張も検討対象とする

### 3. 可視化要件

- 音声波形またはスペクトラム（FFT）をリアルタイムに描画
- 初期実装ではシンプルなバーグラフ型スペクトラムを採用
- 音の大きさや周波数成分に連動したビジュアル反応

### 4. 開発環境（推奨）

- プログラミング言語：Python
- 使用ライブラリ（例）：
  - `sounddevice`（WASAPI ループバックに対応）
  - `numpy`（FFT 処理）
  - `matplotlib` または `pygame`, `PyQt`（可視化用）

### 5. UI 要件（初期）

- シンプルなウィンドウにビジュアライザーを表示
- リアルタイムで動作していることが明確に視認できる
- （拡張要素として）以下を追加可能：
  - オーディオデバイスの選択 UI
  - ビジュアライザースタイルの変更機能

### 6. ライセンス・配布

- オープンソースとして GitHub に公開予定
- MIT ライセンス等のシンプルなライセンス形態を想定

---

## 非機能要件

- 仮想オーディオデバイス（VB-Cable 等）を必要としない
- 処理レイテンシ（遅延）は極力小さくする
- 拡張可能なコード構造とする（後から視覚効果の追加が容易）

---

## 備考

- 視覚表現のクオリティは今後段階的に向上させていく
- クロスプラットフォーム化の可能性はあるが、現時点では Windows 11 に特化
